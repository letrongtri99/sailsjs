<div id="list">
    Article Manager
    <table class="table">
        <thead>
            <tr>
                <th scope="col">#</th>
                <th scope="col">Name</th>
                <th scope="col">Number of Posts</th>
                <th scope="col">Status</th>
                <th scope="col">Role</th>
                <th scope="col">Tools</th>
            </tr>
        </thead>
        <tbody>
            <%nguoi.forEach(function(a){%>
                <tr>
                    <td><%=a.id%></td>
                    <td><%=a.name%></td>
                    <td><%=a.post%></td>
                    <td><%=a.status%></td>
                    <td><%=a.role%></td>
                    <td>
                        <a class="btn btn-info" role="button" >View</a>
                        <a class="btn btn-info" href="" role="button" data-toggle="modal"  data-target="#h1<%=a.id%>" id="edit" >Edit</a>
                        <%if(a.email !==req.session.currentUser.email){%>
                            <a href="/user/delete/<%=a.id%>" class="btn btn-info" role="button" >Delete</a>
                        <%}%>
                    </td>
                </tr>
            <%})%>
        </tbody>
        
    </table>
    <%nguoi.forEach(function(a){%>
        <div class="modal fade" id="h1<%=a.id%>" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
                <div class="modal-dialog" role="document">
                  <div class="modal-content">
                    <div class="modal-header">
                      <h5 class="modal-title" id="exampleModalLabel">Edit info</h5>
                      <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                      </button>
                    </div>
                    <div class="modal-body">
                      <form action="/user/update/<%=a.id%>" method="POST">
                            <div class="form-group">
                                <label for="exampleInputEmail1">Email address</label>
                                <input name="email" type="email" id="Email" class="form-control" id="exampleInputEmail1" aria-describedby="emailHelp" placeholder="Enter email" value="<%=a.email%>">
                            </div>
                            <div class="form-group">
                                <label for="exampleInputPassword1">Password</label>
                                <input name="pass" type="password" id="Pass" class="form-control" placeholder="Password" value="<%=a.pass%>">
                            </div>
                            <div class="form-group">
                              <label for="exampleInputPassword1">Name</label>
                              <input name="name" type="text" id="Name" class="form-control" placeholder="Password" value="<%=a.name%>">
                            </div>
                            <%if(a.role == 'Editor'){%>
                            <div class="form-group">
                              <label for="exampleFormControlSelect1">Role</label>
                              <select class="form-control" name="role" id="role">
                                  <option>Editor</option>
                                  <option>Viewer</option>
                              </select>
                            </div>
                            <%} 
                            else if(a.role =='Viewer'){%>
                              <div class="form-group">
                                  <label for="exampleFormControlSelect1">Role</label>
                                  <select class="form-control" name="role" id="role">
                                      <option>Viewer</option>
                                      <option>Editor</option>
                                  </select>
                                </div>
                              <%}
                              else{%>
                                <div class="form-group">
                                    <label for="exampleFormControlSelect1">Role</label>
                                    <select class="form-control" name="role" id="role">
                                        <option>Admin</option>
                                    </select>
                                </div>
                              <%}%>
                            <% 
                            if(a.status == 'Hoạt Động' && a.role != 'Admin') {%>
                              <div class="form-group">
                                  <label for="exampleFormControlSelect1">Status</label>
                                  <select class="form-control" name="status" id="role">
                                      <option>Hoạt Động</option>
                                      <option>Vô Hiệu Hóa</option>
                                  </select>
                              </div>
                              <%}
                              else if (a.status == 'Vô Hiệu Hóa' && a.role != 'Admin'){%>
                                <div class="form-group">
                                    <label for="exampleFormControlSelect1">Status</label>
                                    <select class="form-control" name="status" id="role">
                                        <option>Vô Hiệu Hóa</option>
                                        <option>Hoạt Động</option>
                                    </select>
                                </div>
                              <%}%>
      
                              <br/>
                              <input type="submit" id="change" value="Save changes" class="btn btn-primary"></input>
                      </form>
                    </div>
                  </div>
                </div>
        </div>
    <%})%>
    
</div>
<script>
    // var user = '<%= JSON.stringify(nguoi) %>'
</script>

